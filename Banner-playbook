Ansible playbook for banner update

[ansible@ansible_master playbooks]$ ansible-playbook bannerfile.yml --syntax-check
 [WARNING]: While constructing a mapping from /home/ansible/ansible-infra/playbooks/bannerfile.yml, line 15, column 11, found a duplicate dict
key (name). Using last defined value only.

 [WARNING]: Ignoring invalid attribute: state


playbook: bannerfile.yml
[ansible@ansible_master playbooks]$ cat bannerfile.yml
---
- name: Update banner to all the servers
  hosts: all
  user: ansible
  become: true
  tasks:
       - name: Copy the banner files to remote systems
         copy: src=/home/ansible/ansible-infra/banner.txt dest=/etc/
       - name: replace banner line at sshd config
         replace:
          path: /etc/ssh/sshd_config
          regexp: '^(.*)#Banner none(.*)$'
          replace: 'Banner /etc/banner.txt'
          backup: yes
       -  name: restart the sshd service
          service:
          name: sshd
          state: restarted
[ansible@ansible_master playbooks]$ ansible-playbook bannerfile.yml

*If youâ€™re new to YAML, the syntax can be tricky at first, particularly with spacing (no tabs). Before running a playbook, you can check the syntax using:

ansible-playbook --syntax-check myplaybook.yml

*You can test a playbook without actually making any changes to the target hosts:

ansible-playbook --check myplaybook.yml

* Stepping through a playbook may also be useful:

ansible-playbook --step myplaybook.yml



 
